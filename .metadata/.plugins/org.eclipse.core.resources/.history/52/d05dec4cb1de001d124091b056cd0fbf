package com.student.action;

import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

public class LoginPage extends Action {
	 public ActionForward execute(ActionMapping mapping, ActionForm form,
		        HttpServletRequest request, HttpServletResponse response) throws Exception { 
		 Cookie[] cookies = request.getCookies();
		 String username = null;
		 if (cookies != null) {
		     for (Cookie cookie : cookies) {
		         if (cookie.getName().equals("username")) {
		             username = cookie.getValue();
		             break;
		         }
		     }
		 }
		 HttpSession session = request.getSession();
		 String isLoggedIn = (String) session.getAttribute(username);
		 
		 if(isLoggedIn.equals("True")) {
			 return mapping.findForward("success");
		 }else {
			 return mapping.findForward("failure");
		 }

		 
		 
		       
	 }
}
